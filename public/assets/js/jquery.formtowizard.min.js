!function($){$.fn.formToWizard=function(options,cmdParam1){if(0==this.length)return this;"string"!=typeof options&&(options=$.extend({submitButton:"",showProgress:!0,showStepNo:!0,validateBeforeNext:null,select:null,progress:null,nextBtnName:"Suivant &gt;",prevBtnName:"&lt; Précédent",buttonTag:"a",nextBtnClass:"btn next",prevBtnClass:"btn prev"},options));var element=this,steps=$(element).find("fieldset"),count=steps.length,submmitButtonName="#"+options.submitButton,commands=null;if("string"!=typeof options)$(element).data("options",options),"function"!=typeof options.validateBeforeNext&&(options.validateBeforeNext=function(){return!0}),options.showProgress&&"function"!=typeof options.progress&&(options.showStepNo?$(element).before("<ul id='steps' class='steps'></ul>"):$(element).before("<ul id='steps' class='steps breadcrumb'></ul>")),steps.each(function(i){$(this).wrap('<div id="step'+i+'" class="stepDetails"></div>'),$(this).append('<p id="step'+i+'commands" class="commands"></p>'),options.showProgress&&"function"!=typeof options.progress&&(options.showStepNo?$("#steps").append("<li id='stepDesc"+i+"'>Step "+(i+1)+"<span>"+$(this).find("legend").html()+"</span></li>"):$("#steps").append("<li id='stepDesc"+i+"'>"+$(this).find("legend").html()+"</li>")),0==i?(createNextButton(i),selectStep(i)):i==count-1?($("#step"+i).hide(),createPrevButton(i),$(submmitButtonName).addClass("next").detach().appendTo("#step"+i+"commands")):($("#step"+i).hide(),createPrevButton(i),createNextButton(i))});else if("string"==typeof options){var cmd=options;if(initCommands(),"function"!=typeof commands[cmd])throw cmd+" is invalid command!";commands[cmd](cmdParam1)}function initCommands(){options=$(element).data("options"),commands={GotoStep:function(stepNo){var stepName="step"+--stepNo;if(void 0===$("#"+stepName)[0])throw"Step No "+stepNo+" not found!";"none"===$("#"+stepName).css("display")&&($(element).find(".stepDetails").hide(),$("#"+stepName).show(),selectStep(stepNo))},NextStep:function(){$(".stepDetails:visible").find("a.next").click()},PreviousStep:function(){$(".stepDetails:visible").find("a.prev").click()}}}function createPrevButton(i){var stepName="step"+i;$("#"+stepName+"commands").append("<"+options.buttonTag+' href="#" id="'+stepName+'Prev" class="'+options.prevBtnClass+'">'+options.prevBtnName+"</"+options.buttonTag+">"),$("#"+stepName+"Prev").bind("click",function(e){return $("#"+stepName).hide(),$("#step"+(i-1)).show(),selectStep(i-1),!1})}function createNextButton(i){var stepName="step"+i;$("#"+stepName+"commands").append("<"+options.buttonTag+' href="#" id="'+stepName+'Next" class="'+options.nextBtnClass+'">'+options.nextBtnName+"</"+options.buttonTag+">"),$("#"+stepName+"Next").bind("click",function(e){return!0===options.validateBeforeNext(element,$("#"+stepName))&&($("#"+stepName).hide(),$("#step"+(i+1)).show(),selectStep(i+1)),!1})}function selectStep(i){"function"==typeof options.progress?options.progress(i,count):options.showProgress&&($("#steps li").removeClass("current"),$("#stepDesc"+i).addClass("current")),options.select&&options.select(element,$("#step"+i))}return this}}(jQuery);